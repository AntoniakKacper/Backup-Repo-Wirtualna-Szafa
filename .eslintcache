[{"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\index.tsx":"1","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\App.tsx":"2","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Register\\Register.tsx":"3","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Login\\Login.tsx":"4","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\Header.tsx":"5","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\Button.tsx":"6","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\GlobalStyle.tsx":"7","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\shared-style.tsx":"8","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\theme.tsx":"9","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\ForgotPassword\\ForgotPassword.tsx":"10","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\Links.tsx":"11","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\ApplicationRoutes.tsx":"12","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\AuthProvider.tsx":"13","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebase.tsx":"14","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebaseConfig.ts":"15","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Home\\Home.tsx":"16"},{"size":285,"mtime":1612644755110,"results":"17","hashOfConfig":"18"},{"size":161,"mtime":1612534683385,"results":"19","hashOfConfig":"18"},{"size":6298,"mtime":1612709037069,"results":"20","hashOfConfig":"18"},{"size":5094,"mtime":1612709967348,"results":"21","hashOfConfig":"18"},{"size":449,"mtime":1611694992980,"results":"22","hashOfConfig":"18"},{"size":514,"mtime":1612704524046,"results":"23","hashOfConfig":"18"},{"size":843,"mtime":1611780994791,"results":"24","hashOfConfig":"18"},{"size":152,"mtime":1611688907845,"results":"25","hashOfConfig":"18"},{"size":299,"mtime":1612704380613,"results":"26","hashOfConfig":"18"},{"size":172,"mtime":1611781617334,"results":"27","hashOfConfig":"18"},{"size":290,"mtime":1611783544689,"results":"28","hashOfConfig":"18"},{"size":1177,"mtime":1612648673632,"results":"29","hashOfConfig":"18"},{"size":1101,"mtime":1612702322004,"results":"30","hashOfConfig":"18"},{"size":387,"mtime":1612647796081,"results":"31","hashOfConfig":"18"},{"size":790,"mtime":1612699022199,"results":"32","hashOfConfig":"18"},{"size":813,"mtime":1612709527203,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1msjtp",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"36"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\index.tsx",[],["69","70"],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\App.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Register\\Register.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Login\\Login.tsx",["71","72"],"import React, { useContext, useEffect, useState } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\nimport { AuthContext } from \"../../../AuthProvider\";\r\n\r\nimport { styled } from '../../../config/theme';\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport { BrowserRouter as Router, Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { Header } from \"../../Header\";\r\n\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport Button from \"../../elements/Button\";\r\nimport Links from \"../../elements/Links\";\r\n\r\nimport { flexCenterXY } from \"../../../styles/shared-style\";\r\nimport { auth, database } from \"../../../database/firebase\";\r\n\r\ninterface UserData {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  margin: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  withoutLabel: {\r\n    marginTop: theme.spacing(3),\r\n  },\r\n  textField: {\r\n    width: \"25ch\",\r\n  },\r\n}));\r\n\r\nconst Wrapper = styled.div`\r\n  ${flexCenterXY}\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Form = styled.form`\r\n  ${flexCenterXY}\r\n  width: 100%;\r\n  flex-direction: column;\r\n  padding-top: 150px;\r\n  padding-bottom: 100px;\r\n`;\r\n\r\nexport const Login: React.FC = () => {\r\n  const classes = useStyles();\r\n  const authContext = useContext(AuthContext);\r\n  const {loadingAuthState} = useContext(AuthContext);\r\n  const history = useHistory();\r\n\r\n\r\n  const [values, setValues] = useState<UserData>({\r\n    email: \"\",\r\n    password: \"\",\r\n  })\r\n\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  \r\n  const handleChange = (event: any) => {\r\n    setValues((values) => ({\r\n      ...values,\r\n      [event.target.name]: event.target.value\r\n    }));\r\n  }\r\n\r\n  const handleSubmit = (event: any) => {\r\n    event.preventDefault();\r\n    auth.signInWithEmailAndPassword(values.email, values.password).then((userCredentials) => {\r\n      authContext.setCurrentUser(userCredentials);\r\n      history.push(\"/home\");\r\n    }).catch((error) => console.log(error.message));\r\n  }\r\n\r\n  useEffect(() => {\r\n    auth.getRedirectResult().then((result) => {\r\n      if(!result || !result.user || !auth.currentUser){\r\n        return;\r\n      }\r\n\r\n      return setUserProfile().then(() => {\r\n        history.push(\"/home\");\r\n      }).catch((error) => console.log(error.message))\r\n    })\r\n  }, [])\r\n\r\n  const setUserProfile = async () => {\r\n    if(await isUserExisits()){\r\n      return ;\r\n    }\r\n\r\n    const user = auth.currentUser!;\r\n    console.log(user);\r\n    database.collection(\"Users\").doc(user.uid).set({\r\n      //Sprawdzic czy istnieje juz taka nazwa uzytkownika\r\n      username: user.displayName\r\n    }).then(() => {\r\n      console.log(\"Username saved\");\r\n      return;\r\n    }).catch((error) => console.log(error.message))\r\n  }\r\n\r\n  const isUserExisits = async() => {\r\n    const doc = await database.collection(\"Users\").doc(auth.currentUser!.uid).get();\r\n    return doc.exists;\r\n  }\r\n\r\n  if (loadingAuthState) {\r\n    return (\r\n        <div>\r\n            <LinearProgress color=\"secondary\" />\r\n        </div>  \r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Wrapper>\r\n      <Form onSubmit={handleSubmit}>\r\n          <FormControl className={clsx(classes.margin, classes.textField)}>\r\n            <InputLabel color=\"secondary\">Email</InputLabel>\r\n            <Input\r\n              color=\"secondary\"\r\n              type=\"email\"\r\n              placeholder=\"email@email.com\"\r\n              name=\"email\"\r\n              onChange={handleChange}\r\n            />\r\n          </FormControl>\r\n\r\n          <FormControl className={clsx(classes.margin, classes.textField)}>\r\n            <InputLabel color=\"secondary\">Password</InputLabel>\r\n            <Input\r\n              type={showPassword ? \"text\" : \"password\"}\r\n              value={values.password}\r\n              name=\"password\"\r\n              onChange={handleChange}\r\n              color=\"secondary\"\r\n              endAdornment={\r\n                <InputAdornment position=\"end\">\r\n                  {\" \"}\r\n                  <IconButton\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                  >\r\n                    {showPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              }\r\n            />\r\n          </FormControl>\r\n\r\n          \r\n        <Button type=\"submit\">Sign in</Button>\r\n        </Form>\r\n\r\n        <Links>\r\n          <Link to=\"/register\">\r\n            Register\r\n          </Link>\r\n          <Link to=\"/forgotPassword\">\r\n            Forgot Password?\r\n          </Link>\r\n        </Links>\r\n      </Wrapper>\r\n    </>\r\n  );\r\n};\r\n","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\Header.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\Button.tsx",[],["73","74"],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\GlobalStyle.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\shared-style.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\theme.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\ForgotPassword\\ForgotPassword.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\Links.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\ApplicationRoutes.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\AuthProvider.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebase.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebaseConfig.ts",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Home\\Home.tsx",[],{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"79","severity":1,"message":"80","line":9,"column":27,"nodeType":"81","messageId":"82","endLine":9,"endColumn":33},{"ruleId":"83","severity":1,"message":"84","line":101,"column":6,"nodeType":"85","endLine":101,"endColumn":8,"suggestions":"86"},{"ruleId":"75","replacedBy":"87"},{"ruleId":"77","replacedBy":"88"},"no-native-reassign",["89"],"no-negated-in-lhs",["90"],"@typescript-eslint/no-unused-vars","'Router' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'history' and 'setUserProfile'. Either include them or remove the dependency array.","ArrayExpression",["91"],["89"],["90"],"no-global-assign","no-unsafe-negation",{"desc":"92","fix":"93"},"Update the dependencies array to be: [history, setUserProfile]",{"range":"94","text":"95"},[2785,2787],"[history, setUserProfile]"]