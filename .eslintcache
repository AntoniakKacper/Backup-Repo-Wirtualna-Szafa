[{"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\index.tsx":"1","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\App.tsx":"2","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\Header.tsx":"3","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\GlobalStyle.tsx":"4","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\shared-style.tsx":"5","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\theme.tsx":"6","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\Links.tsx":"7","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\ApplicationRoutes.tsx":"8","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\AuthProvider.tsx":"9","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebase.tsx":"10","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebaseConfig.ts":"11","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Home\\Home.tsx":"12","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\MyField.tsx":"13","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\Login.tsx":"14","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\ForgotPassword.tsx":"15","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\Register.tsx":"16","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\styledComponents\\AuthStyles.tsx":"17","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\Schema.tsx":"18","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\ErrorSnackbar.tsx":"19","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\PrivateRoute.tsx":"20"},{"size":197,"mtime":1615144156639,"results":"21","hashOfConfig":"22"},{"size":249,"mtime":1615143960972,"results":"23","hashOfConfig":"22"},{"size":747,"mtime":1614782843350,"results":"24","hashOfConfig":"22"},{"size":843,"mtime":1611780994791,"results":"25","hashOfConfig":"22"},{"size":152,"mtime":1611688907845,"results":"26","hashOfConfig":"22"},{"size":299,"mtime":1612704380613,"results":"27","hashOfConfig":"22"},{"size":272,"mtime":1614784062589,"results":"28","hashOfConfig":"22"},{"size":1095,"mtime":1615048395145,"results":"29","hashOfConfig":"22"},{"size":1059,"mtime":1615193590431,"results":"30","hashOfConfig":"22"},{"size":387,"mtime":1612647796081,"results":"31","hashOfConfig":"22"},{"size":790,"mtime":1612699022199,"results":"32","hashOfConfig":"22"},{"size":1090,"mtime":1615144341347,"results":"33","hashOfConfig":"22"},{"size":1862,"mtime":1614784038506,"results":"34","hashOfConfig":"22"},{"size":4560,"mtime":1615144578678,"results":"35","hashOfConfig":"22"},{"size":172,"mtime":1614088116006,"results":"36","hashOfConfig":"22"},{"size":4305,"mtime":1615196503984,"results":"37","hashOfConfig":"22"},{"size":547,"mtime":1614790478260,"results":"38","hashOfConfig":"22"},{"size":1034,"mtime":1614786737168,"results":"39","hashOfConfig":"22"},{"size":845,"mtime":1615046163038,"results":"40","hashOfConfig":"22"},{"size":440,"mtime":1615144628540,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"1msjtp",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"44"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\index.tsx",[],["85","86"],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\App.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\Header.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\GlobalStyle.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\styles\\shared-style.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\theme.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\Links.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\ApplicationRoutes.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\AuthProvider.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebase.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\database\\firebaseConfig.ts",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\Home\\Home.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\MyField.tsx",[],["87","88"],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\Login.tsx",["89"],"//import Button from \"../../elements/Button\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport { Formik } from \"formik\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { BrowserRouter as Router, Link, useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../../../AuthProvider\";\r\nimport { styled } from \"../../../config/theme\";\r\nimport firebase, { auth, database } from \"../../../database/firebase\";\r\nimport { flexCenterXY } from \"../../../styles/shared-style\";\r\nimport Links from \"../../elements/Links\";\r\nimport { SigninSchema } from \"../../pages/authentication/Schema\";\r\nimport { Header } from \"../../Header\";\r\nimport { StyledButton, StyledForm } from \"../../styledComponents/AuthStyles\";\r\nimport { MyField } from \"../../elements/MyField\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport MuiAlert, { AlertProps } from \"@material-ui/lab/Alert\";\r\n\r\ninterface SignInFormValues {\r\n  email: string;\r\n  password: string;\r\n}\r\ninterface MyFormProps {\r\n  onSubmit: (values: SignInFormValues) => void;\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  ${flexCenterXY}\r\n  flex-direction: column;\r\n`;\r\n\r\nexport const Login: React.FC<MyFormProps> = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const { loadingAuthState } = useContext(AuthContext);\r\n  const history = useHistory();\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const Alert = (props: AlertProps) => {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n  };\r\n\r\n  const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleSubmit = (values: SignInFormValues) => {\r\n    auth\r\n      .signInWithEmailAndPassword(values.email, values.password)\r\n      .then((userCredentials: firebase.auth.UserCredential) => {\r\n        authContext.setCurrentUser(userCredentials);\r\n        //localStorage.setItem(\"user\", userCredentials);\r\n        history.push(\"/home\");\r\n      })\r\n      .catch((error) => {\r\n        setErrorMessage(error.message);\r\n        setOpen(true);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    auth.getRedirectResult().then((result) => {\r\n      if (!result || !result.user || !auth.currentUser) {\r\n        return;\r\n      }\r\n\r\n      return setUserProfile()\r\n        .then(() => {\r\n          history.push(\"/home\");\r\n        })\r\n        .catch((error) => {\r\n          setErrorMessage(error.message);\r\n          setOpen(true);\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  const setUserProfile = async () => {\r\n    if (await isUserExisits()) {\r\n      return;\r\n    }\r\n\r\n    const user = auth.currentUser!;\r\n    console.log(user);\r\n    database\r\n      .collection(\"Users\")\r\n      .doc(user.uid)\r\n      .set({\r\n        username: user.displayName,\r\n      })\r\n      .then(() => {\r\n        console.log(\"Username saved\");\r\n        return;\r\n      })\r\n      .catch((error) => {\r\n        setErrorMessage(error.message);\r\n        setOpen(true);\r\n      });\r\n  };\r\n\r\n  const isUserExisits = async () => {\r\n    const doc = await database\r\n      .collection(\"Users\")\r\n      .doc(auth.currentUser!.uid)\r\n      .get();\r\n    return doc.exists;\r\n  };\r\n\r\n  if (loadingAuthState) {\r\n    return (\r\n      <div>\r\n        <LinearProgress color=\"secondary\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <Wrapper>\r\n        <Formik\r\n          initialValues={{ email: \"\", password: \"\" }}\r\n          validationSchema={SigninSchema}\r\n          onSubmit={(values) => {\r\n            handleSubmit(values);\r\n          }}\r\n        >\r\n          {() => (\r\n            <StyledForm>\r\n              <MyField name=\"email\" placeholder=\"Email\"></MyField>\r\n              <MyField\r\n                name=\"password\"\r\n                placeholder=\"Password\"\r\n                passwordDecoration={true}\r\n              />\r\n              <StyledButton variant=\"outlined\" color=\"secondary\" type=\"submit\">\r\n                Sign in\r\n              </StyledButton>\r\n            </StyledForm>\r\n          )}\r\n        </Formik>\r\n        <Links>\r\n          <Link to=\"/register\">Register</Link>\r\n          <Link to=\"/forgotPassword\">Forgot Password?</Link>\r\n        </Links>\r\n        <Snackbar open={open} autoHideDuration={6000} onClose={handleClose}>\r\n          <Alert onClose={handleClose} severity=\"error\">\r\n            {errorMessage}\r\n          </Alert>\r\n        </Snackbar>\r\n      </Wrapper>\r\n    </>\r\n  );\r\n};\r\n","D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\ForgotPassword.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\Register.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\styledComponents\\AuthStyles.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\pages\\authentication\\Schema.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\components\\elements\\ErrorSnackbar.tsx",[],"D:\\SZKOŁA\\Praca licencjacka\\testowe aplikacje\\typescript-app\\src\\config\\PrivateRoute.tsx",[],{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"90","replacedBy":"94"},{"ruleId":"92","replacedBy":"95"},{"ruleId":"96","severity":1,"message":"97","line":79,"column":6,"nodeType":"98","endLine":79,"endColumn":8,"suggestions":"99"},"no-native-reassign",["100"],"no-negated-in-lhs",["101"],["100"],["101"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'history' and 'setUserProfile'. Either include them or remove the dependency array.","ArrayExpression",["102"],"no-global-assign","no-unsafe-negation",{"desc":"103","fix":"104"},"Update the dependencies array to be: [history, setUserProfile]",{"range":"105","text":"106"},[2638,2640],"[history, setUserProfile]"]